---
title: SQLD - 데이터 모델링의 이해3
author: BambooStreet
date: 2024-08-11 00:00:01 +0800
categories: [study]
tags: [SQL, SQLD, 데이터모델링, ERD, 엔티티, 관계]
image: assets/img/posts/20240811/Identifier3.png
---

## 데이터 모델링 관계
관계(Relationship)는 엔티티 간의 연관성이나 상호작용을 나타낸다. 



### 관계의 표기법
> * 관계명(Membership): 관계의 이름
> * 관계차수(Cardinality): 1:1, 1:M, M:N
> * 관계선택사항(Optinality): 필수관계, 선택관계

**관계명**은 두 엔티티간의 관계를 설명하는 이름이다.
**관계차수**애는 세 가지 유형이 있는데, 한 엔티티의 레코드가 다른 레코드와의 대응 수를 나타낸다.
**관계선택사항**은 관계의 필수성을 나타내며, 반드시 관계가 존재하는 경우 필수관계, 있어도 되고 없어도 되는 경우 선택관계라 한다.




## 엔티티 식별자 
**엔티티 식별자**는 각 엔티티 인스턴스를 고유하게 식별할 수 있는 속성 또는 속성의 집합을 말한다.




### 식별자의 종류



※대표성에 따른 구분

<p style="text-align: center;">
  <img src="assets/img/posts/20240811/Identifier.png" alt="schema" width="100%" style="max-width: 700px; display: block; margin-left: auto; margin-right: auto;">
</p>


**주식별자(Primary Identifier)**
* 엔티티 내에서 대표적으로 사용되는 식별자
* 일반적으로 데이터베이스의 기본 키(Primary Key)로 구현된다.

**보조식별자(Alternate Identifier)**
* 대체 식별자
* 주식별자는 아니지만 엔티티를 유일하게 식별할 수 있는 속성
* 주로 유니크 인덱스(Unique Index)로 구현된다.




※생성 위치에 따른 구분

<p style="text-align: center;">
  <img src="assets/img/posts/20240811/Identifier1.png" alt="schema" width="100%" style="max-width: 700px; display: block; margin-left: auto; margin-right: auto;">
</p>

**내부식별자(Internal Identifier)**
* 해당 엔티티 내에서 자체적으로 생성된 식별자
**외부식별자(Foreign Identifier)**:
* 다른 엔티티로부터 상속받은 식별자
* 관계형 데이터베이스에서 외래 키(Foreign Key)로 구현되는 경우가 많다.





※속성의 개수에 따른 구분

<p style="text-align: center;">
  <img src="assets/img/posts/20240811/Identifier2.png" alt="schema" width="100%" style="max-width: 700px; display: block; margin-left: auto; margin-right: auto;">
</p>

**단일식별자(Single Identifier)**
* 하나의 속성만으로 엔티티를 식별할 수 있는 식별자

**복합식별자(Composit Identifier)**
* 두 개 이상의 속성을 조합하여 엔티티를 식별하는 식별자



※대체 여부에 따른 구분

<p style="text-align: center;">
  <img src="assets/img/posts/20240811/Identifier3.png" alt="schema" width="100%" style="max-width: 700px; display: block; margin-left: auto; margin-right: auto;">
</p>

**본질식별자**
* 업무적으로 원래 의미가 있던 식별자 속성
* 예: 주민등록번호, 상품코드 등

**인조식별자**
* 원래의 식별자를 대체하여 새롭게 만든 식별자
* 주로 일련번호 형태로 사용
* 예: 자동 증가하는 회원 ID, 주문번호 등


### 주식별자의 특징
> * 유일성: 주식별자에 의해 엔티티 내에 모든 인스턴스들을 유일하게 구분함
> * 최소성: 주식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수가 되어야 한다.
> * 불변성: 주식별자가 한번 특정 엔티티에 지정되며 그 식별자의 값은 변하지 않아야 한다.
> * 존재성: 주식별자가 지정되면 반드시 데이터 값이 존재해야 한다.(NULL 허용 안됨)

### 식별자와 비식별자 관계 비교

| 특성 | 식별자 관계 | 비식별자 관계 |
|------|------------|--------------|
| 정의 | 부모 테이블의 기본키가 자식 테이블의 기본키의 일부가 됨 | 부모 테이블의 기본키가 자식 테이블의 일반 컬럼이 됨 |
| 기본키 구성 | 자식 테이블의 기본키가 부모 테이블의 기본키를 포함 | 자식 테이블이 독립적인 기본키를 가짐 |
| 외래키 제약 | 기본키의 일부로 존재 | 일반 컬럼으로 존재 |
| 데이터 무결성 | 강한 결합으로 무결성 보장이 강함 | 약한 결합으로 유연성이 높음 |
| 조인 성능 | 일반적으로 더 나은 조인 성능 (조인 횟수 감소 가능) | 추가적인 조인이 필요할 수 있음 |
| 데이터 모델 변경 | 변경이 어려울 수 있음 | 상대적으로 변경이 용이함 |
| índexing | 복합 인덱스 활용 가능성 높음 | 단일 컬럼 인덱스 주로 사용 |
| 적합한 시나리오 | - 강한 종속관계가 필요한 경우<br>- 1:1 또는 1:N 관계<br>- 조인 성능이 중요한 경우 | - 약한 종속관계가 필요한 경우<br>- 유연한 데이터 모델이 필요한 경우<br>- M:N 관계를 표현할 때 |
| 장점 | - 참조 무결성 보장<br>- 조인 성능 향상 가능<br>- 자연키 사용 시 의미있는 키 구성 | - 유연한 데이터 모델<br>- 독립적인 엔티티 표현<br>- 변경에 유연함 |
| 단점 | - 유연성이 떨어짐<br>- 복합키 사용으로 인한 복잡성<br>- 변경이 어려움 | - 추가적인 조인 필요 가능<br>- 참조 무결성 검사 추가 필요<br>- 인조키 사용 시 의미 없는 키 값 |

### 식별자의 분류 체계

| 분류 | 식별자 | 설명 |
|------|--------|------|
| 대표성에 따른 분류 | 주식별자 (Primary Identifier) | 엔티티 내에서 대표적으로 사용되는 식별자. 일반적으로 기본 키(Primary Key)로 구현됨 |
|  | 보조식별자 (Alternate Identifier) | 주식별자는 아니지만 엔티티를 유일하게 식별할 수 있는 속성. 대체 키(Alternate Key)로도 불림 |
| 생성 위치에 따른 분류 | 내부식별자 | 해당 엔티티 내에서 자체적으로 생성된 식별자 |
|  | 외부식별자 (Foreign Identifier) | 다른 엔티티로부터 상속받은 식별자. 주로 외래 키(Foreign Key)로 구현됨 |
| 속성의 수에 따른 분류 | 단일식별자 (Single Identifier) | 하나의 속성만으로 엔티티를 식별할 수 있는 식별자 |
|  | 복합식별자 (Composite Identifier) | 두 개 이상의 속성을 조합하여 엔티티를 식별하는 식별자 |
| 대체 여부에 따른 분류 | 본질식별자 | 업무적으로 원래 의미가 있던 식별자 속성. 예: 주민등록번호, 상품코드 |
|  | 인조식별자 | 원래의 식별자를 대체하여 새롭게 만든 식별자. 주로 일련번호 형태로 사용. 예: 자동 증가하는 회원 ID |
| 스스로 생성 여부에 따른 분류 | 업무식별자 | 업무적으로 만들어지는 식별자. 예: 주문번호, 학번 |
|  | 시스템식별자 | 시스템에서 자동으로 생성되는 식별자. 예: 순차번호, UUID |
| 식별자 관계에 따른 분류 | 식별자 관계의 식별자 | 부모 테이블의 식별자를 포함하는 자식 테이블의 식별자 |
|  | 비식별자 관계의 식별자 | 부모 테이블의 식별자를 일반 속성으로 포함하는 자식 테이블의 식별자 |


## QA
1. 엔티티 관계를 정의할 때, 확인해야 할 사항으로 업무기술서, 장표에 관계 연결을 가능하게 하는 명사(Noun)이 존재한다.(O/X)

    * 정답: X
    * 해설: 엔티티 관계를 정의할 때, 업무기술서나 장표에서 확인해야할 것은 관계 연결을 가능하게 하는 동사(Verb)이다.



2.  SQL 문의 조인 관계를 최소화 하는 경우 비식별자 관계로 연결해야 한다.(O/X)

    * 정답: X
    * 해설: SQL문의 조인 관계를 최소화하기 위해서는 오히려 식별자 관계를 사용하는 것이 더 효과적일 수 있다. 식별자 관계는 부모 테이블의 기본키가 자식 테이블의 기본키의 일부로 전이되는 관계이다.
    비식별자 관계는 부모 테이블의 기본키가 자식 테이블의 일반 컬럼으로 전이되는 관계이다.











